#+TITLE: Install Open Vino on MacOS
#+OPTIONS: toc:1
#+OPTIONS: ^:nil
#+Include: ../purpleweb.org

* zsh
** install
#+begin_src shell -r -n :results output :exports both
cd /Users/student
export PATH=/usr/local/bin:$PATH
brew install zsh zsh-completions
brew install zsh-syntax-highlighting
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
brew tap homebrew/cask-fonts
brew install font-meslo-for-powerline
git clone https://github.com/powerline/fonts.git --depth=1
cd fonts
./install.sh
cd ..
rm -rf fonts
brew cleanup

#+end_src
** .zshrc
#+begin_src shell -r -n :results output :exports both

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/opt/anaconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/opt/anaconda3/etc/profile.d/conda.sh" ]; then
        . "/opt/anaconda3/etc/profile.d/conda.sh"
    else
        export PATH="/opt/anaconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<
export TERM="xterm-256color"
ZSH_THEME="powerlevel10k/powerlevel10k"
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
#+end_src

* NCS2

ã€ŒVPUã€ä¹ƒ Movidius å°è‡ªå®¶è™•ç†å™¨çš„ç¨±ç‚ºï¼Œå…¨ç¨±ç‚º Vision Processing Unitã€Œè¦–è¦ºè™•ç†å™¨ã€ã€‚å®ƒæ˜¯ä¸€æšå°ˆæ³¨æ–¼è™•ç†å½±åƒåˆ†æçš„è™•ç†å™¨ï¼Œèˆ‡ CPU éœ€è¦è™•ç†ç¨‹åºã€GPU è™•ç†å½±åƒè¼¸å‡ºç­‰ä¸åŒã€‚å®ƒçš„å·¥ä½œæ¯”è¼ƒå–®ä¸€ï¼Œå°±æ˜¯åœ–åƒè­˜åˆ¥ï¼Œå¯èªªæ˜¯æŠŠ CPU èˆ‡ GPU æ··åˆè™•ç†çš„å·¥ä½œç¨ç«‹å‡ºä¾†ï¼Œæˆç‚ºä¸€æšæ–°æ ¸å¿ƒã€‚

é€™æ¬¡ Google Project Tango èˆ‡ Movidius åˆä½œçš„è™•ç†å™¨åç‚ºã€ŒMyriad 2ã€ï¼ˆMA2450ï¼‰ï¼Œå±¬æ–¼ç¬¬äºŒä»£çš„ç”¢å“ï¼Œç”±å°ç©é›» TSMC åˆ©ç”¨ 28 ç´ç±³è£½ç¨‹ç”Ÿç”¢ï¼Œæ“æœ‰æ¯ç§’ 3 è¬å„„æ¬¡æµ®é»é‹ç®—èƒ½åŠ›ï¼Œä¸¦èƒ½å¤ åŒæ™‚è™•ç† 6 å€‹ 60 frame Full HD å½±åƒå…§å®¹è¼¸å…¥ï¼Œåœ¨ç´”è¦–è¦ºè™•ç†æ–¹é¢å¯ä»¥è¼•é¬†æ“Šæ•— Nvidia çš„ Tegraï¼Œè€Œä¸”å®ƒçš„å…±äº«å…§å­˜åªæœ‰2MBï¼Œæ¯”å¾ˆå¤šè™•ç†å™¨çš„éƒ½è¦å°ã€‚

åœ¨åœ–åƒè­˜åˆ¥ä¸Šï¼ŒVPU èƒ½å¤ åšåˆ°è¿½è¹¤å‹•æ…‹ç‰©ä»¶ã€å¯¦ç‰©æ¸¬è·åŠæ·±åº¦å­¸ç¿’ç’°å¢ƒï¼Œé€™ä¸‰å¤§åŠŸèƒ½ç®—æ˜¯è£œè¶³äº†ç¾æ™‚é›»è…¦ç¼ºä¹æˆ–æ¯”è¼ƒé›£åšåˆ°çš„æ±è¥¿ã€‚
#+CAPTION: Myraid 2 Vision Processor Unit (VPU)
#+LABEL:fig:VPU
#+name: fig:VPU
#+ATTR_LATEX: :width 300
#+ATTR_ORG: :width 300
#+ATTR_HTML: :width 500
[[file:images/vision-processing-unit-01.jpg]]

** å…·å‚™è¿½è¹¤èˆ‡ç¹è¡Œèƒ½åŠ›çš„ç„¡äººæ©Ÿ
VPU çš„ä½¿ç”¨å ´æ™¯å¾ˆå¤šï¼Œä¾‹å¦‚ä»–å€‘æœ€è¿‘ä¹Ÿè·Ÿ DJI åˆä½œï¼Œæ¨å‡ºä¸€æ¬¾åç‚º Phantom 4 çš„ç„¡äººæ©Ÿï¼Œæ­¤æ©Ÿé€šé VPU æä¾›äº†åµæ¸¬åŠŸèƒ½ï¼Œå”åŠ© Phantom 4 æ“æœ‰è‡ªè¡Œç¹é–‹éšœç¤™ç‰©çš„èƒ½åŠ›ã€‚

ä¸éï¼ŒMovidius çš„ VPU ä¹Ÿä¸æ˜¯å®Œå…¨æ²’æœ‰å°æ‰‹ï¼Œä¾‹å¦‚ Intel çš„ Real Sense æŠ€è¡“ä¾¿ä»¥å…·å‚™ç›¸åŒé‹ç®—èƒ½åŠ›ç‚ºç›®æ¨™ï¼Œä¸¦åœ¨ Yunnec ç„¡äººæ©Ÿ Typhoon H ä¸Šå¯¦ç¾äº† 360 åº¦åµæ¸¬ã€è¿½è¹¤å‹•æ…‹ç‰©ä»¶ã€è‡ªå‹•ç¹è¡Œç­‰åŠŸèƒ½ï¼Œå¯¦ç¾æˆ‘å€‘ä¸€ç›´èªç‚ºä¸å¤ªå¯èƒ½åšåˆ°çš„ç„¡äººæ©Ÿæ‹æ”åŠŸèƒ½ã€‚

** Intel ç¥ç¶“è¨ˆç®—æ£’NCS2ç°¡ä»‹
è‹±ç‰¹çˆ¾NCS 2ç”±æœ€æ–°ä¸€ä»£çš„è‹±ç‰¹çˆ¾VPUï¼ˆè¦–è¦ºè™•ç†å–®å…ƒï¼‰æ”¯æŒâ€“è‹±ç‰¹çˆ¾Movidius Myriad X VPUã€‚é€™æ˜¯ç¬¬ä¸€å€‹å…·æœ‰ç¥ç¶“è¨ˆç®—å¼•æ“çš„VPUï¼Œå¯æä¾›é¡å¤–çš„æ€§èƒ½ã€‚è«¸å¦‚Caffeï¼ŒTensor Flowæˆ–MXNetä¹‹é¡çš„æ·±åº¦å­¸ç¿’ç¥ç¶“ç¶²çµ¡å¯ä»¥èˆ‡NCS2ä¸Šçš„OpenVINOå·¥å…·åŒ…é›†æˆã€‚é€™äº›æ©Ÿå™¨å­¸ç¿’æ¡†æ¶é‡å°å…¨æ–°çš„æ·±åº¦ç¥ç¶“ç¶²çµ¡ï¼ˆDNNï¼‰æ¨ç†å¼•æ“é€²è¡Œäº†å„ªåŒ–ï¼Œè©²å¼•æ“æä¾›çš„æ€§èƒ½æ˜¯å‰ä¸€ä»£çš„å…«å€ã€‚

å€ŸåŠ©é›»è…¦å’ŒIntel NCS2ï¼Œé–‹ç™¼äººå“¡å¯ä»¥å•Ÿå‹•å…¶AIå’Œè¨ˆç®—æ©Ÿè¦–è¦ºæ‡‰ç”¨çš„é–‹ç™¼ï¼Œä¸¦åœ¨å¹¾åˆ†é˜å…§åŸ·è¡Œã€‚è‹±ç‰¹çˆ¾NCS2åœ¨æ¨™æº–USB 3.0ä¸Šé‹è¡Œï¼Œä¸éœ€è¦å…¶ä»–ç¡¬é«”ï¼Œå¾è€Œä½¿ç”¨æˆ¶èƒ½å¤ ç„¡ç¸«è½‰æ›ç”±é›»è…¦è¨“ç·´å¥½çš„æ¨¡å‹ï¼Œç„¶å¾Œå°‡å…¶éƒ¨ç½²åˆ°å„ç¨®é‚Šç·£è¨­å‚™è€Œä¸éœ€é€£ç¶²æˆ–é€£é›²ã€‚ç„¡è«–æ˜¯é–‹ç™¼æ™ºèƒ½ç›¸æ©Ÿï¼Œå…·æœ‰æ‰‹å‹¢è­˜åˆ¥åŠŸèƒ½çš„ç„¡äººæ©Ÿï¼Œå·¥æ¥­æ©Ÿå™¨äººï¼Œé‚„æ˜¯ä¸‹ä¸€ä»£æ™ºèƒ½å®¶å±…è¨­å‚™ï¼Œè‹±ç‰¹çˆ¾ç¥ç¶“è¨ˆç®—æ£’2éƒ½èƒ½ç‚ºé–‹ç™¼äººå“¡æä¾›æ›´å¿«åŸå‹æ‰€éœ€çš„åŠŸèƒ½ã€‚

** æ‡‰ç”¨
å› ç‚ºèƒ½å¤ è·‘OpenVINOçš„ç¡¬é«”ç­‰ç´šçš„CPUå»ºè­°èƒ½åœ¨8æ ¸ä»¥ä¸Š, å› ç‚ºä¸æ˜¯æ‰€æœ‰æ©Ÿå™¨éƒ½æœ‰GPU, æ‰€ä»¥åªè¦åœ¨æ²’æœ‰GPUçš„æ©Ÿå™¨ä¸Šæ’å…¥NCS2, é¦¬ä¸Šå°±å¯ä»¥ä½¿ç”¨æœ‰GPUç­‰ç´šçš„æ¼”ç®—æ³•, æœ€å¸¸è¦‹çš„çµ„åˆå°±æ˜¯PCåŠ NCS2æˆ–Resapberry PiåŠ NCS2ã€‚

è©¦æƒ³ä¸€ä¸‹,å¦‚æœå‚³çµ±çš„ç›£æ§å®‰é˜²æ”å½±æ©Ÿ, æ’äº†ä¸€æ”¯NCS2åœ¨ä¸Šé¢, å°±å¯ä»¥åšäººè‡‰åµæ¸¬, ç‰©ä»¶è¾¨è­˜æˆ–è»Šç‰Œè¾¨è­˜, æ˜¯ä¸æ˜¯ç¬é–“å°±æŠŠå‚³çµ±çš„ç›£æ§æ”å½±æ©Ÿ, é¦¬ä¸Šè®Šæˆäº†å…·AIåŠŸèƒ½çš„æ™ºæ…§å®‰é˜²æ”å½±æ©Ÿ, é€™æ¨£è¨±å¤šçµ‚ç«¯çš„è¨­å‚™, å°±å¯ä»¥é¦¬ä¸Šå¾æ™ºéšœè®Šæˆæœ‰æ™ºæ…§, é€™ä¸æ˜¯æŒºå®Œç¾çš„å—ï¼Ÿ

é€™é‚Šæä¾›ä¸€å€‹æ¯”è¼ƒè¡¨, åŸæ–‡å¦‚ä¸‹,æ˜¯ç”¨OpenVINOçš„toolkitåŸ·è¡ŒMobileNet SSDæ™‚æ‰€åšçš„æ¯”è¼ƒ, å¯ä»¥çœ‹åˆ°NCS2æ¯”NCS1å¤šäº†2.3å€‹FPS,é›–ç„¶ä¸å¤š, ä½†å»æ¯”æ¨¹è“æ´¾åªç”¨å–®é¡†CPUä¾†è·‘MobileNet SSDæ™‚,å¤šäº†æ•´æ•´8å€‹FPS, çœŸçš„æœ‰é”åˆ°åŠ é€Ÿçš„åŠŸèƒ½ã€‚

https://ithelp.ithome.com.tw/upload/images/20190925/20118900PDmj3SE949.jpg

#+CAPTION: NCS2 performance
#+LABEL:fig:NCS2-1
#+name: fig:NCS2-1
#+ATTR_LATEX: :width 300
#+ATTR_ORG: :width 300
#+ATTR_HTML: :width 500
[[file:images/20118900PDmj3SE949.jpg]]

* DNNå¦‚ä½•åœ¨ä¸åŒç³»çµ±é€²è¡Œæœ€ä½³åŒ–
ç¾å½¢æ·±åº¦å­¸ç¿’æ¶æ§‹é¢è‡¨çš„ç¬¬ä¸€å€‹å•é¡Œå‰‡æ˜¯å¦‚ä½•åœ¨ç•°è³ªåŒ–çš„è¨ˆç®—ç³»çµ±ä¸Šåšè¨ˆç®—é€Ÿåº¦ä¸Šçš„æœ€ä½³åŒ–ã€‚
ç›®å‰æ·±åº¦å­¸ç¿’çš„æ¶æ§‹ç›¸ç•¶å¤šç¨®ï¼Œä¸¦å„æœ‰å…¶ç‰¹è‰²ã€‚ä½†é€™æ¨£ç™¾å®¶çˆ­é³´çš„æƒ…æ³ï¼Œå»å¼•ç™¼äº†å¦‚å·´åˆ¥å¡”å±æ©Ÿçš„æ··äº‚ç‹€æ³[fn:2]ã€‚

ç•¶æˆ‘å€‘é–‹å§‹é€²å…¥æ·±åº¦å­¸ç¿’ä¸–ç•Œæ™‚ï¼Œæœ€å¸¸æœƒæƒ³çŸ¥é“çš„å°±æ˜¯ï¼Œåˆ°åº•è¦æŒ‘é¸å“ªä¸€ç¨®æ¡†æ¶ä¾†å…¥é–€ï¼Ÿ
** Frames
æœ‰å¦‚åœ–40-1å’Œè¡¨æ ¼40-1é¡¯ç¤ºï¼Œç›®å‰åœ¨æœ€å¤§çš„é–‹æºç¤¾ç¾¤Githubä¸Šï¼Œå¯å·²æ‰¾åˆ°20ç¨®æ˜Ÿæ˜Ÿæ•¸è¶…éä¸€åƒçš„æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼ŒåŒ…å«ï¼šTensorFlowã€Kerasã€Caffeã€PyTorchã€CNTKã€MXNetã€DL4Jã€Theanoã€Torch7ã€Caffe2ã€Paddleã€DSSTNEã€tiny-dnnã€Chainerã€neonã€ONNXã€BigDLã€DyNetã€brainstormã€CoreMLâ€¦ç­‰ã€‚

è€Œæ’åç¬¬ä¸€çš„TensorFlowæ›´æœ‰å°‡è¿‘10è¬å€‹æ˜Ÿæ˜Ÿï¼Œå¯ä»¥å¾—çŸ¥ï¼Œæ·±åº¦å­¸ç¿’å—åˆ°å¤§å®¶é—œæ³¨ç•¶é¸æ“‡æ·±åº¦æ¡†æ¶æ™‚ï¼Œæˆ‘å€‘èƒ½å¾ä»¥ä¸‹å¹¾å€‹é¢å‘ä¾†è€ƒæ…®ï¼Œå°‡åˆ†åˆ¥ä»‹ç´¹ä»¥ä¸‹å…­å€‹é¢å‘[fn:1]ã€‚

#+CAPTION: å¸¸è¦‹æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼ˆåœ–ç‰‡ä¾†æºï¼šOmniXRIæ•´ç†è£½ä½œï¼‰
#+LABEL:fig:DNNFrames
#+name: fig:DNNFrames
#+ATTR_LATEX: :width 500
#+ATTR_ORG: :width 500
#+ATTR_HTML: :width 500
[[file:images/DNNFrames.png]]

ç›®å‰æœ‰ä¸‰å¤§é™£ç‡Ÿï¼š

- Kerasï¼šæ”¯æ´TensorFlowã€Theanoã€MXNetã€DL4Jã€CNTKï¼Œ
- å¾®è»Ÿå’ŒFacebookè¯ç›Ÿæ¨å‡ºONNXï¼šå¯æ”¯æ´Caffe2ã€CNTKã€PyTorch
- Googleçš„TensorFlowï¼šåœ¨ 2015 å¹´ç™¼è¡¨

å¦å¤–ï¼Œé›–ç„¶æ¡†æ¶ä¹‹é–“å¯ä»¥è½‰æ›ï¼Œä½†ä¸ä»£è¡¨è½‰æ›å¾Œçš„åŸ·è¡Œæ•ˆç‡æœƒå’Œç›´æ¥ä½¿ç”¨æŸå€‹æ¡†æ¶ä¸€æ¨£å¥½ï¼Œæ­¤æ™‚åªèƒ½ä¾å¯¦éš›éœ€æ±‚ä¾†å–æ¨æ˜¯å¦æ‹¿å½ˆæ€§æ›å–æ•ˆèƒ½[fn:1]ã€‚

** Frameçš„é¸æ“‡
ä¸€èˆ¬è€Œè¨€ï¼Œæ·±åº¦å­¸ç¿’æ¶æ§‹çš„ä½¿ç”¨è€…å¯ä»¥ç²—ç•¥åˆ†ç‚ºå…©é¡[fn:3]ï¼š
1. ä¸€ç¨®æ˜¯é‹ç”¨æ·±åº¦å­¸ç¿’æ¶æ§‹ä¾†é€²è¡Œæ¦‚å¿µé©—è­‰ï¼ˆProof of Conceptï¼‰ï¼Œå› è€Œéœ€è¦å¿«é€Ÿå¯¦é©—ä¸”è©•ä¼°ä¸åŒçš„æ¨¡å‹ã€‚
2. å¦ä¸€ç¨®å‰‡æ˜¯å¸Œæœ›å°‡æ·±åº¦å­¸ç¿’å°å…¥å•†æ¥­æ‡‰ç”¨ï¼Œå°‡æ·±åº¦å­¸ç¿’æ¨¡å‹é…ç½®æˆæ‡‰ç”¨ç¨‹å¼ï¼ˆappï¼‰ï¼Œæˆç‚ºå°ä¸€èˆ¬æ°‘çœ¾é–‹æ”¾çš„æœå‹™å¹³å°ã€‚
ç„¶è€Œï¼ŒåŸºæ–¼ä¸åŒçš„ä½¿ç”¨éœ€æ±‚ï¼Œç©¶ç«Ÿè©²ä¾ä½•æ¨™æº–å¾ä¸åŒçš„æ·±åº¦å­¸ç¿’æ¶æ§‹ä¸­é¸æ“‡å‘¢ï¼Ÿ

ä»¥ç ”ç©¶ç‚ºå–å‘çš„ä½¿ç”¨è€…ï¼Œå°æ–¼æ·±åº¦å­¸ç¿’æ¶æ§‹çš„éœ€æ±‚ï¼Œæœ€é‡è¦çš„è€ƒé‡å³æ˜¯å¿«é€Ÿä¸Šæ‰‹ï¼Œä¸”å®¹æ˜“é™¤éŒ¯ã€‚é€éå¯å‹•æ…‹åŸ·è¡Œçš„ç›´è­¯å¼èªè¨€ï¼Œåœ¨å˜—è©¦æˆ–é–‹ç™¼æ—©æœŸæ™‚ï¼Œä¾¿å¯åŠæ—©ç™¼ç¾æ¨¡å‹è£¡çš„è‡­èŸ²ï¼Œé¿å…æµªè²»å¤§é‡æ™‚é–“è¨“ç·´ä¸€å€‹éŒ¯èª¤çš„æ¨¡å‹ã€‚å› æ­¤ï¼Œç¾è¡Œæ·±åº¦å­¸ç¿’æ¶æ§‹çš„ä¸€å€‹å…±åŒè™•ï¼Œå³æ˜¯æ”¯æŒä¸€æˆ–å¤šç¨®ç›´è­¯å¼èªè¨€çš„å‘¼å«ä»‹é¢ã€‚å…¶ä¸­ï¼Œé‘‘æ–¼ Python æ˜¯ç›®å‰æœ€ç†±é–€çš„ä¸€å€‹ç¨‹å¼èªè¨€ï¼Œåœ¨ç›®å‰è¨±å¤šæ¯”è¼ƒæ·±åº¦å­¸ç¿’æ¶æ§‹çš„éƒ¨è½æ ¼æ–‡ç« ä¸­ï¼Œç„¡è«–æ˜¯ç”±ç¬¬ä¸‰æ–¹å…¬å¸æ‰€è©•æ¯”ï¼Œæˆ–æ˜¯éƒ¨è½å®¢å€‹äººçš„åŠªåŠ›ï¼Œå¤šå°‡æ·±åº¦å­¸ç¿’æ¶æ§‹ä¸­æ˜¯å¦åŒ…å« Python çš„å®¢æˆ¶ç«¯å‘¼å«ä»‹é¢ï¼ˆClient Interfaceï¼‰ï¼Œè¦–ç‚ºä¸€å€‹åŠ åˆ†æ¢ä»¶ã€‚åœ¨é€™æ¨£çš„è€ƒé‡ï¼Œä¼¼ä¹åœ¨æ¶æ§‹è¨­è¨ˆä¸Šï¼Œä»¥å‹•æ…‹è¨ˆç®—åœ–ï¼ˆdynamic graphï¼‰ç‚ºä¸»è¦ç¶²è·¯è³‡æ–™çµæ§‹çš„ PyTorch ç‚ºæœ€ä½³è€ƒé‡ã€‚

Keras æ˜¯ä¸€å€‹æ·±åº¦å­¸ç¿’çš„ä»‹é¢å‡½å¼åº«ï¼ˆAPIï¼‰ï¼Œè€Œéæ·±åº¦å­¸ç¿’æ¶æ§‹ã€‚åœ¨æ—©æœŸï¼ŒKeras åªæœ‰å°ˆæ³¨æ–¼é–‹ç™¼å»ºæ§‹åœ¨ Theano ä¸Šçš„é«˜éš API ç‚ºä¸»ã€‚ä»¥ç‰©ä»¶å°å‘çš„æ–¹å¼ï¼Œå°‡å»ºæ¨¡çš„ç¨‹å¼ç¢¼å°è£æˆ layerï¼Œè€Œåˆ©ç”¨å †ç–Šä¸€å±¤ä¸€å±¤çš„ Layer ç‰©ä»¶ä¾†å»ºç«‹é¡ç¥ç¶“æ¨¡å‹ï¼Œæˆ–åˆç¨±ç‚º Layer-wise ç‚ºä¸»çš„æ–¹å¼ä¾†å»ºæ¨¡ã€‚åœ¨ Tensorflow ç™¼è¡¨å¾Œï¼Œäººæ°£ç›¸ç•¶é«˜çš„ Keras  ä¾¿é€²è€Œæ¡ç”¨ Tensorflow ä½œç‚ºåŸ·è¡Œå¾Œç«¯ï¼ˆbackendï¼‰ï¼Œä½†åœ¨ä¸åŒçš„æ·±åº¦å­¸ç¿’çš„æ¶æ§‹é€æ¼¸è“¬å‹ƒç™¼å±•å¾Œï¼Œåˆä½µå…¥ Microsoft çš„ CNLKï¼Œè€Œæˆç‚ºä¸€å€‹é€šç”¨åŒ–çš„æ·±åº¦å­¸ç¿’ä»‹é¢ã€‚
Keras ä½œç‚ºä¸€å€‹æ·±åº¦å­¸ç¿’æ¶æ§‹çš„æœ€ä¸Šå±¤ï¼Œå°±å¦‚ Thomas æ‰€è¨€ï¼Œå°‡å¾Œç«¯çš„åŸå§‹ç¢¼å°è£ï¼Œä½¿ç”¨è€…åœ¨å»ºæ§‹é¡ç¥ç¶“ç¶²è·¯æ¨¡å‹æ™‚ï¼Œåªéœ€ç°¡çŸ­çš„å¹¾è¡Œç¨‹å¼ç¢¼ä¾¿å¯å®Œæˆï¼Œå› æ­¤é”åˆ°å»ºæ¨¡çš„ç°¡æ˜“æ€§ã€‚ç„¶è€Œä»¥ Layer-wise ç‚ºä¸»çš„çš„å»ºæ¨¡æ–¹å¼é€šå¸¸ç¼ºä¹å½ˆæ€§ï¼Œåœ¨è¼ƒç‚ºè¤‡é›œçš„é¡ç¥ç¶“ç¶²è·¯ï¼Œä»éœ€è¦è¦ªè‡ªæ’°å¯«å¾Œç«¯çš„åŸå§‹ç¢¼ï¼Œæˆ–ç”šè‡³æ‰“ç ´ Layer çš„æ¶æ§‹ï¼Œé‡æ–°ç·¨å¯«è¨ˆç®—åœ–ä¸­çš„é‹ç®—å…ƒã€‚ä¸é Keras æ‰€æä¾›çš„ä¾¿åˆ©æ€§ï¼Œå°æ–¼è¨±å¤šæ·±åº¦å­¸ç¿’å…¥é–€è€…è€Œè¨€æ˜¯éå¸¸å¯¶è²´çš„è¸è…³çŸ³ï¼Œé‚£äº›è¤‡é›œçš„ç¶²è·¯æ¶æ§‹ï¼Œå¦‚ MAC network (Hudson and Manning, ICLR 2018)ï¼Œæˆ– Capsule Network å°±ç•™çµ¦é‚£äº›å¤©æ‰èˆ¬çš„è…¦è¢‹å§ï¼

å’Œ PyTorch éƒ½åœ¨å»å¹´ç™¼è¡¨çš„ï¼Œé‚„æœ‰ Amazon å’Œ Microsoft å…±åŒåˆä½œçš„é–‹æºå°ˆæ¡ˆï¼Œä»¥ python ç‚ºä¸»çš„ Gluon APIã€‚Amazon çš„é›²ç«¯æœå‹™ä½¿ç”¨çš„æ·±åº¦å­¸ç¿’æ¶æ§‹ MXNet å’Œ Microsoft çš„ Cognitive Toolkit éƒ½æœƒä½¿ç”¨ Gluon API ä»‹é¢ï¼Œä¸éç›®å‰é‚„æ˜¯ä»¥æ”¯æ´ MXNet ç‚ºä¸»ã€‚
MXNetï¼Œç”±è‘—åçš„é–‹æºå°ˆæ¡ˆæ–ç±ƒ Apache åŸºé‡‘æœƒæ‰€åŸ¹è‚²ï¼Œäº¦æ˜¯ç”±å¤šå€‹é–‹æºå°ˆæ¡ˆæ¼”åŒ–è€Œä¾†ï¼Œåœ¨ 2015 å¹´æ­£å¼ç™¼è¡¨ã€‚é™¤äº† Gluon API å¤–ï¼ŒMXNet æ›´æä¾›é«˜åº¦å„ªåŒ–çš„ R ä»‹é¢ã€‚å¦‚åŒ PyTorch æ‰€æ¨™æ¦œçš„ï¼ŒGluon ä¹Ÿæ˜¯ä½¿ç”¨æ‰€è¬‚çš„å‹•æ…‹è¨ˆç®—åœ–ï¼Œä½¿ç”¨è€…ç„¡éœ€å†å»ºæ¨¡çš„æ™‚å€™ï¼Œå°±å…ˆæŠŠè¨ˆç®—åœ–å»ºç«‹å¥½ï¼Œåè€Œé€éå¦‚åŒéŒ„å½±çš„æ–¹å¼ï¼Œä¸€æ­¥ä¸€æ­¥çš„åŸ·è¡Œï¼Œè®“ä½¿ç”¨è€…åœ¨å°æ¢¯åº¦é™¤éŒ¯æ™‚æ›´åŠ çš„å®¹æ˜“ã€‚ä½†åŒæ™‚ï¼ŒGluon ä¹Ÿå®¹è¨±ä½¿ç”¨è€…ï¼Œå»ºç«‹æŠ½è±¡å¼çš„ç¬¦è™Ÿè¨ˆç®—åœ–ï¼Œè—‰è‘—äº‹å…ˆå„ªåŒ–å·²ç·¨è­¯å¥½çš„æ·±åº¦ç¶²è·¯æ¶æ§‹ï¼Œåœ¨åŸ·è¡Œé€Ÿåº¦ä¸Šæ¯”å‹•æ…‹è¨ˆç®—åœ–æ›´ç‚ºå¿«é€Ÿã€‚
Amazon é›²ç«¯æœå‹™æ”¯æŒçš„æ·±åº¦å­¸ç¿’å‡½å¼åº«ï¼ˆåœ–ç‰‡ä¾†æºï¼š AWSï¼‰

æœªä¾†æ·±åº¦å­¸ç¿’æ¶æ§‹ç™¼å±•çš„è¶¨å‹¢ï¼Œç›®å‰æœ‰å…©å€‹é‡è¦çš„èµ°å‘å‚™å—åˆ°é—œæ³¨ï¼š
ä¹‹ä¸€ï¼Œæ˜¯è¨ˆç®—èƒ½åŠ›çš„æå‡ã€‚å³ä½¿æœ‰è‰¯å¥½çš„è»Ÿé«”è¨­è¨ˆæ¡†æ¶ä¾†è¨­è¨ˆæ—¥æ¼¸è¤‡é›œçš„é¡ç¥ç¶“ç¶²è·¯æ¨¡å‹ï¼Œç¼ºä¹å¼·å¤§çš„ç¡¬é«”è¨ˆç®—èƒ½åŠ›ï¼Œéæ–¼è¤‡é›œçš„ç¶²è·¯æ¨¡å‹ï¼Œåªæ˜¯ç²¾å·¥é›•ç¢ï¼Œå…·æœ‰è¤‡é›œç´‹è·¯çš„ç¾éº—é›•åˆ»ï¼Œå»ä¸å…·æœ‰ä»»ä½•å¯¦éš›æ•ˆç”¨ã€‚ GPU åŠ å…¥é«˜æ•ˆèƒ½é‹ç®—çš„ç¡¬é«”è¨ˆç®—è¡Œåˆ—ï¼Œæˆç‚ºæ·±åº¦å­¸ç¿’ç ”ç©¶çš„åŠ é€Ÿå™¨ã€‚ç„¶è€Œé›–ç„¶åŠ å¿«äº†åŸ·è¡Œé€Ÿåº¦ï¼ˆperformanceï¼‰ï¼Œä½†ä¹Ÿæé«˜äº†ç¶­æŒé«˜æ•ˆèƒ½è¨ˆç®—åœ¨ç•°è³ªåŒ–ç³»çµ±åŸ·è¡Œçš„é›£è™•ï¼Œæ–¼æ˜¯ä¹ï¼Œé™¤äº†åœ¨ç¡¬é«”ä¸ŠåŠ›æ±‚é©å‘½æ€§çš„çªç ´ï¼Œä¸€å€‹é‡å°ç•°è³ªåŒ–è¨­å‚™åšé‹ç®—æœ€ä½³åŒ–çš„ç·¨è­¯å™¨ï¼Œæ›´é¡¯é‡è¦ã€‚
ä¹‹äºŒï¼Œå‰‡æ˜¯æ¨¡å‹åœ¨ä¸åŒæ¶æ§‹é–“çš„äº¤æ›æª”æ¡ˆæ ¼å¼ã€‚é‘‘æ–¼ï¼Œæ·±åº¦å­¸ç¿’çš„ç›¸é—œå‡½å¼åº«èˆ‡æ¶æ§‹æ—¥æ¼¸è“¬å‹ƒç™¼å±•ï¼Œé¡¯ç„¶åœ°ï¼Œä¸€å€‹å—å„æ–¹èªå¯çš„æª”æ¡ˆäº¤æ›æ ¼å¼åˆ¶å®šï¼Œå°‡æœƒæœ‰åˆ©æ–¼ä»¥å»ºæ§‹çš„æ·±åº¦é¡ç¥ç¶“ç¶²è·¯æ¨¡å‹åœ¨ä¸åŒçš„æ¶æ§‹ä¸­ä½¿ç”¨ï¼Œæœ‰åˆ©æ–¼é‡è£½æ¨¡å‹æˆæœä»¥åŠæ¯”è¼ƒå„å€‹æ¶æ§‹çš„é€Ÿåº¦å’Œå¯¦è¸ç´°ç¯€ã€‚

** å·´åˆ¥å¡”å±æ©Ÿ
ç”±æ–¼å½±åƒæ¨¡å‹å› ç‚ºè¨“ç·´ä¸æ˜“æˆ–å…¶å—é™æ–¼è¨ˆç®—å¹³å°çš„ç¡¬é«”æ¶æ§‹ï¼Œæ‰€ä»¥ç¶“å¸¸éœ€è¦ä½¿ç”¨ä»–äººä»¥è¨“ç·´å¥½çš„é¡ç¥ç¶“ç¶²è·¯æ¨¡å‹ï¼Œåœ¨å…¶ä¸Šå±¤åŠ å…¥è‡ªå·±çš„åˆ†é¡å™¨å±¤ï¼Œä»¥ transfer learning çš„æ–¹å¼ä¾†å®Œæˆä»»å‹™ã€‚é›–ç„¶æ„Ÿè¬å…±äº«æ¨¡å‹çš„æ™®éï¼Œç„¶è€Œå› ç‚ºæ¨¡å‹çš„å»ºç½®æ¶æ§‹ä¸åŒï¼Œå†åŠ ä¸Šè¨±å¤šå³ä½¿è¼¸å‡ºæ¬Šé‡ï¼Œä¹Ÿå› ç‚ºä½¿ç”¨é«˜éš APIï¼Œä»¥ç‰©ä»¶å°å‘æ–¹å¼å»ºæ§‹çš„æ¨¡å‹é»‘ç®±åŒ–ï¼Œæ‰€ä»¥åœ¨å¾ç¡¬ç¢Ÿè®€å…¥æ¬Šé‡æ™‚ï¼Œé€šå¸¸æœƒç™¼ç”Ÿè¨±å¤šå•é¡Œã€‚

ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæ–¼æ˜¯å‡ºç¾äº† Open Nueral Network Exchange ï¼ˆONNXï¼‰é–‹æºé¡ç¥ç¶“ç¶²è·¯æ¨¡å‹äº¤æ›æ ¼å¼é€™å€‹è¨ˆç•«ã€‚ç›®å‰åƒèˆ‡é€™å€‹è¨ˆç•«çš„ Facebookï¼ŒMicrosoft å’Œå°ç£çš„æ·±è€•ç·¨è­¯å™¨èˆ‡è™›æ“¬æ©Ÿå™¨çš„ skymizer å…¬å¸ç­‰ã€‚ä½†ï¼Œå¾ˆä¸å¹¸åœ°ï¼ŒGoogle ä¸¦ä¸åœ¨å…¶ä¸­çš„åå–®ä¸­ã€‚é›–ç„¶ Google ä¸¦ä¸å° ONNX åšç›´æ¥æ”¯æ´ï¼Œä½†é‚„æ˜¯æœ‰ç†±å¿ƒçš„ç·¨ç¨‹è€…å¯«äº† Tensorflow åˆ° ONNX æ ¼å¼çš„è½‰æ›ç¨‹å¼ç¢¼ã€‚
[[https://ithelp.ithome.com.tw/articles/10209319][ONNXå¯¦ä½œDEMO]]

* IR
ä¸­ä»‹ç¢¼ï¼ˆIRï¼Œintermediate representationï¼‰æ˜¯ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œå¯å°‡è¼¸å…¥çš„è³‡æ–™å»ºæ§‹ç‚ºä¸€å€‹é›»è…¦ç¨‹å¼ï¼Œä¹Ÿå¯ä»¥å°‡ä¸€éƒ¨ä»½æˆ–æ˜¯æ‰€æœ‰è¼¸å‡ºçš„ç¨‹å¼åæ¨å›è¼¸å…¥è³‡æ–™ã€‚é€™æ„å‘³è‘—ä¸­ä»‹ç¢¼å°‡æœƒä¿ç•™ä¸€äº›è¼¸å…¥è³‡æ–™çš„è³‡è¨Šï¼ŒåŒæ™‚æ“æœ‰æ›´é€²ä¸€æ­¥è¨»é‡‹æˆ–æ˜¯å¿«é€ŸæŸ¥è©¢çš„åŠŸèƒ½[fn:4]ã€‚

èˆ‰ä¸€å€‹å…¸å‹çš„ä¾‹å­ï¼Œå®ƒæ˜¯ç¾ä»£è¨±å¤šç·¨è­¯å™¨æ‰€æ“æœ‰çš„åŠŸèƒ½ï¼Œå®ƒå¯å°‡ä¸€æ®µç¨‹å¼è½‰æ›æˆä¸€å€‹ä¸­é–“å±¤çš„Graphè³‡æ–™çµæ§‹ï¼ŒGraphå¯é€²è¡Œæ•¸æ“šæµåˆ†æï¼Œè€Œä¸”å¯åœ¨å»ºç«‹å¯¦éš›é‹è¡Œçš„CPUæŒ‡ä»¤åˆ—è¡¨ä¹‹å‰é€²è¡Œé‡çµ„ï¼ˆre-arrangementï¼‰ï¼Œé€™ç¨®ä¸­é–“å±¤çš„ä½¿ç”¨æ–¹å¼ï¼Œå…è¨±åƒæ˜¯LLVMçš„ç·¨è­¯ç³»çµ±å¯ä»¥åŒæ™‚æ“æœ‰è¨±å¤šä¸åŒçš„å‰ç«¯èªè¨€ç·¨è­¯å™¨ï¼Œè€Œä¸”å¯ä»¥ç”¢ç”Ÿè¨±å¤šä¸åŒæ¶æ§‹ç³»çµ±çš„æ©Ÿå™¨ç¢¼[fn:4]ã€‚

** Interpreter v.s. compiler
- æ‰€è¬‚çš„ç·¨è­¯ï¼Œæ˜¯æŒ‡åŸå§‹çš„ç¨‹å¼ç¢¼ (source code) æœƒç¶“ç”±ç·¨è­¯å™¨ (compiler) è½‰æ›æˆç›®çš„ç¢¼ (object code) å¾Œï¼Œå†ç”±é€£çµå™¨ (linker) è½‰æ›æˆå¯åŸ·è¡Œçš„äºŒé€²ä½ç¢¼ï¼Œä½¿ç”¨ç·¨è­¯å™¨çš„èªè¨€ç¨±ç‚ºç·¨è­¯å¼èªè¨€ï¼ŒC å’Œ C++ å°±æ˜¯ç·¨è­¯å¼èªè¨€çš„ä»£è¡¨ä½œã€‚ä»¥åŠåƒæ˜¯ C# , LISP, Pascal, VB, Delphi ç­‰éœ€è¦ç·¨è­¯å™¨æ‰èƒ½è½‰æ›æˆå¯åŸ·è¡Œç¢¼ (executable code) çš„èªè¨€ã€‚ç·¨è­¯å¼èªè¨€å¤šåŠæœƒæ˜¯éœæ…‹èªè¨€ (static language)ï¼Œå®ƒå€‘æ“æœ‰äº‹å…ˆå®šç¾©çš„å‹åˆ¥ï¼Œå‹åˆ¥æª¢æŸ¥ (type check) èˆ‡é«˜æ•ˆèƒ½çš„åŸ·è¡Œé€Ÿåº¦ç­‰ç‰¹æ€§ã€‚
- æ‰€è¬‚çš„ç›´è­¯ï¼Œæ˜¯æŒ‡åŸå§‹çš„ç¨‹å¼ç¢¼åªè¦ç¶“éç›´è­¯å™¨ (Interpreter) å³å¯è½‰æ›æˆå¯åŸ·è¡Œç¢¼ï¼Œç”±æ–¼å®ƒå€‘ä¸éœ€è¦ç¶“ç”±ç·¨è­¯å™¨ï¼Œè€Œæ˜¯åœ¨åŸ·è¡Œæ™‚æ‰æœƒå°‡åŸå§‹ç¢¼ç›´è­¯æˆåŸ·è¡Œç¢¼ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šæœƒæ¯”ç·¨è­¯èˆ‡é€£çµå™¨ç”¢ç”Ÿçš„åŸ·è¡Œç¢¼è¦æ…¢ï¼Œæ•ˆèƒ½æœƒæœ‰ä¸€éƒ¨ä»½å–æ±ºæ–¼ç›´è­¯å™¨çš„é€Ÿåº¦ï¼Œè€Œç›´è­¯å¼èªè¨€å¤šåŠä»¥å‹•æ…‹èªè¨€ (dynamic language) ç‚ºä¸»ï¼Œå…·æœ‰éˆæ´»çš„å‹åˆ¥è™•ç† (é¬†æ•£å‹åˆ¥)ï¼Œå‹•æ…‹ç”Ÿæˆèˆ‡ç¨‹å¼å½ˆæ€§ï¼Œä½†é€Ÿåº¦æœƒæ¯”ç·¨è­¯å¼çš„è¦æ…¢ä¸€äº›ï¼Œåƒæ˜¯ JavaScript, Python, Ruby, PHP, ASP ç­‰ç­‰ï¼Œéƒ½æ˜¯ç›´è­¯å¼èªè¨€ã€‚

 ä½¿ç”¨ç·¨è­¯å¼èªè¨€ç”¢ç”Ÿçš„ç¨‹å¼å¹¾ä¹éƒ½æ˜¯å¯ç¨ç«‹åŸ·è¡Œçš„ï¼Œå› ç‚ºå®ƒå€‘éƒ½æ˜¯ç”±Compileré€²è¡Œå‹åˆ¥ï¼èªæ„ç­‰æª¢æŸ¥ï¼Œä»¥åŠç¶“éé€£çµå™¨çš„è™•ç†ï¼Œç¨‹å¼ç¢¼å¹¾ä¹å¯ä»¥ç›´æ¥å­˜å–ç³»çµ±æœå‹™ (system service) èˆ‡ APIsï¼Œæ‰€ä»¥åŸ·è¡Œæ•ˆç‡æœƒç‰¹åˆ¥å¥½ï¼›ç›´è­¯å¼èªè¨€å‰‡æ˜¯å¿…é ˆä¾è³´ä¸€å€‹åŸ·è¡Œç’°å¢ƒ (execution context)ï¼Œèªè¨€å¯ç”¨çš„åŠŸèƒ½ç”±é€™å€‹åŸ·è¡Œç’°å¢ƒæä¾›ï¼Œä¾‹å¦‚ JavaScript åªèƒ½ä½¿ç”¨ç€è¦½å™¨æä¾›çš„åŠŸèƒ½ï¼Œè€Œ PHP åªèƒ½ä½¿ç”¨ php.exe å¯¦ä½œçš„åŠŸèƒ½ä¸€æ¨£ï¼Œå®ƒå€‘ç„¡æ³•ç¨ç«‹åŸ·è¡Œ (æˆ–æ˜¯çœ‹èµ·ä¾†åƒç¨ç«‹ï¼Œå¯¦éš›ä¸Šå»æ˜¯ç³»çµ±è‡ªå‹•åœ¨èƒŒå¾Œå»ºç«‹åŸ·è¡Œç’°å¢ƒï¼Œå¦‚ HTML Application)ã€‚

.NET Framework æœ¬èº«çš„èªè¨€å‰‡æ˜¯åŒ…å«å…©ç¨®æˆä»½ (Java ä¹Ÿæ˜¯)ï¼Œä¸€é–‹å§‹ .NET Framework å…§çš„ç·¨è­¯å™¨ (csc.exe, vbc.exe) æ˜¯æ‰®æ¼”ç·¨è­¯å™¨çš„è§’è‰²ï¼Œå®ƒæœƒå°‡ç¨‹å¼ç·¨è­¯æˆä¸­ä»‹ç¢¼ (Intermediate Code, Java å‰‡æ˜¯bytecode)ï¼Œè€Œåœ¨åŸ·è¡Œæ™‚ï¼Œç”± CLR (JVM) é€²è¡Œå³æ™‚ç·¨è­¯ (JIT Compilation)ï¼Œå°‡ä¸­ä»‹ç¢¼è½‰æ›æˆæ©Ÿå™¨ç¢¼ (Machine code)ï¼Œæ‰å¯ä»¥åœ¨ä½œæ¥­å¹³å°ä¸ŠåŸ·è¡Œï¼Œæ‰€ä»¥ CLR (JVM) æ‰®æ¼”çš„æ˜¯ç›´è­¯å™¨çš„è§’è‰²ï¼Œè€Œå…¶åŸ·è¡Œç’°å¢ƒå‰‡æ˜¯æ•´å€‹ä½œæ¥­ç³»çµ±ï¼Œå®ƒäº¦æœ‰ç·¨è­¯å¼èªè¨€çš„ç‰¹æ€§ï¼Œä½†é€Ÿåº¦æœƒæ¯”ç´”ç¨®çš„ç·¨è­¯å¼èªè¨€ (C/C++) è¦æ…¢ä¸€äº›ï¼ŒåŸå› æ˜¯åœ¨ JIT Compilation åœ¨ç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚æœƒå•Ÿå‹•ï¼Œä»¥å°‡ç¨‹å¼è½‰æˆæ©Ÿå™¨ç¢¼ï¼Œè€Œç´”ç¨®çš„ç·¨è­¯å¼èªè¨€å‰‡åœ¨ç·¨è­¯é€£çµå®Œæˆæ™‚å°±å·²ç¶“æ˜¯æ©Ÿå™¨ç¢¼ï¼Œæ•…ä¸éœ€è¦ JIT è™•ç†ã€‚

** DNNç³»çµ±æ¶æ§‹
ä¸€å€‹æ·±åº¦å­¸ç¿’æ¶æ§‹é€šå¸¸åŒ…å«äº†ä»¥ä¸‹æ¶æ§‹ï¼š
#+CAPTION: æ·±åº¦å­¸ç¿’æ¶æ§‹
#+LABEL:fig:DLSS
#+name: fig:DLSS
#+ATTR_LATEX: :width 300
#+ATTR_ORG: :width 300
#+ATTR_HTML: :width 500
[[file:images/DLS.png]]
åœ¨ä¸Šåœ–ä¸­ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°ç²—ç•¥åˆ†ç‚ºå±¬æ–¼è»Ÿé¡Œç›¸é—œçš„å¦‚ï¼Œä½¿ç”¨è€… APIï¼ˆUser APIï¼‰ï¼ŒåŸ·è¡Œç³»çµ±å–®å…ƒï¼ˆSystem componentsï¼‰å’Œæ–¼ç¡¬é«”ç›¸é—œï¼ˆcomputer architectureï¼‰ã€‚ä½¿ç”¨è€… APIï¼ŒåŒ…å«å¦‚ä½•å¯¦ä½œé¡ç¥ç¶“ç¶²è·¯é‹ç®—å…ƒï¼Œå­¸ç¿’æ¼”ç®—æ³•ä»¥åŠæ¢¯åº¦æ•¸å€¼é‹ç®—çš„éƒ¨åˆ†ã€‚åœ¨ä½¿ç”¨è€… API ä¹‹ä¸Šï¼Œå‰‡æ˜¯åŒ…æ‹¬äº†å¦‚ Keras æ›´ç‚ºæŠ½è±¡çš„ APIã€‚

ä½¿ç”¨è€… API çš„å¯¦ä½œæ–¹å¼ï¼Œç›®å‰æ·±åº¦å­¸ç¿’æ¶æ§‹çš„è¶¨å‹¢å‰‡æ˜¯åˆ©ç”¨è¨ˆç®—åœ–çš„æ–¹æ³•ä¾†ä½œç‚ºè³‡æ–™çµæ§‹ã€‚è€Œè¨ˆç®—åœ–çš„è¨­è¨ˆæ–¹å¼ï¼Œå‰‡ä½¿æ·±åº¦å­¸ç¿’çš„æ¶æ§‹æœå‘å…©å€‹ä¸åŒçš„æ–¹å‘ç™¼å±•ï¼šä¸€å€‹æ˜¯ä»¥ PyTorch ç‚ºä¸»çš„å‹•æ…‹è¨ˆç®—åœ–ï¼Œå¦ä¸€å€‹å‰‡æ˜¯ä»¥ Tensorflow ç‚ºä¸»çš„éœæ…‹è¨ˆç®—åœ–ã€‚

** è¨ˆç®—åœ–
è¨ˆç®—åœ–çš„ç™¼å±•ï¼Œå¯ä»¥è¿½æœ”åˆ°ä¸‰åå¤šå¹´å‰çš„ä¸€å€‹å‰µæ–°ä¸»æ„ï¼Œé‚£å°±æ˜¯é‡å°é¡ç¥ç¶“ç¶²è·¯æˆ–æ©Ÿæ¢°å­¸ç¿’æ¼”ç®—æ³•æ‰€ç™¼å±•çš„è‡ªå‹•æ¢¯åº¦è¨ˆç®—æ–¹å¼ï¼ˆAutomatic Differentiationï¼‰ã€‚é¡ç¥ç¶“ç¶²è·¯çš„è¨“ç·´ï¼Œä¾è³´å…©å€‹æ­¥é©Ÿï¼š
1. ç¬¬ä¸€å€‹æ­¥é©Ÿæ˜¯æ­£å‘å‚³æ’­ï¼ˆfeed forwardï¼‰ï¼Œå°±æ˜¯å°‡è¨“ç·´è³‡æ–™é¤µé€çµ¦é¡ç¥ç¶“ç¶²è·¯ï¼Œè—‰è‘—å¾€ä¸Šæ”€çˆ¬é¡ç¥ç¶“ç¶²è·¯å…§ï¼Œå±¤å±¤ç–Šèµ·çš„ç¶²è·¯çµæ§‹ï¼Œæœ€å¾Œåˆ°é”æœ€ä¸Šå±¤çš„è¼¸å‡ºç¥ç¶“å…ƒã€‚
2. ç¬¬äºŒå€‹æ­¥é©Ÿå‰‡æ˜¯åå‘å‚³æ’­ï¼ˆback propagationï¼‰ï¼Œå°‡é¡ç¥ç¶“ç¶²è·¯æœ€ä¸Šå±¤çš„è¼¸å‡ºï¼Œèˆ‡æ­£ç¢ºçš„åˆ†é¡æ¨™ç±¤æˆ–æ•¸å€¼ä»£å…¥æå¤±å‡½æ•¸å¾Œï¼Œè¨ˆç®—å‡ºçš„èª¤å·®å€¼ï¼Œéœ€è¦å†æ¬¡ç”±ä¸Šè€Œä¸‹ï¼Œå°å„å±¤åƒæ•¸å–åå¾®åˆ†è¨ˆç®—ï¼Œä»¥è¨ˆç®—è©²å±¤åƒæ•¸å°èª¤å·®çš„å€‹åˆ¥è²¢ç»å¾Œï¼Œå†å¾€ä¸‹å›æº¯æ·±ä¸å¯æ¸¬çš„å±¤å±¤å †ç–Šç¶²çµ¡ï¼Œé€éé€£é–è¦å‰‡ï¼ˆchain ruleï¼‰ï¼Œæ›´æ–°æ¯ä¸€å±¤çš„æ¬Šé‡å’Œåç§»åƒæ•¸å€¼ã€‚

ç„¶è€Œï¼Œæ­£å‘æˆ–åå‘çš„å‚³æ’­è¨ˆç®—ï¼Œæ‰€ä»°è³´çš„æ˜¯ä¸€å€‹ç›¸ç•¶åŸºç¤çš„å¾®åˆ†æŠ€å·§ï¼Œchain rule ä¾†åŸ·è¡Œã€‚è€Œè¨ˆç®—åœ–ï¼Œå‰‡æ˜¯å°‡æ­£å‘å‚³æ’­çš„è¨ˆç®—é †åºï¼Œä»¥ä¸€å€‹æœ‰æ–¹å‘çš„åœ–ä¾†è¡¨ç¤ºã€‚åœ¨è¨ˆç®—åœ–ä¸­ï¼Œæ¯ä¸€å€‹ç¯€é»éƒ½æ˜¯ä¸€å€‹é‹ç®—å…ƒï¼Œæˆ–ä»£è¡¨è³‡æ–™çš„å¼µé‡ï¼ˆtensorï¼‰ã€‚ç¯€é»èˆ‡ç¯€é»ä¹‹é–“ï¼Œå…·æœ‰æ–¹å‘çš„é€£çµï¼Œå‰‡æ˜¯é‹ç®—å…ƒåŸ·è¡Œçš„é †åºã€‚ä¸‹åœ–å°±æ˜¯ä¸€å€‹éå¸¸ç°¡å–®çš„è¨ˆç®—åœ–ã€‚

* Github
1. åƒè€ƒ:[[https://github.com/openvinotoolkit/openvino_notebooks][ openvinotoolkit / openvino_notebooks ]]
2. Create and activate a Virtual Environment
   #+begin_src shell -r  :results output :exports both
   conda create --name ai4y python=3.7 --yes
   conda activate ai4y

   conda create --name openvino_env
   conda activate openvino_env
   #+end_src
3. Clone the Repository
   #+begin_src shell -r -n :results output :exports both
   cd ~/Desktop
   git clone https://github.com/openvinotoolkit/openvino_notebooks.git
   cd ~/Desktop/openvino_notebooks
   #+end_src
4. Install the Packages
   #+begin_src shell -r -n :results output :exports both
   python -m pip install --upgrade pip
   pip install -r requirements.txt
   #+end_src
   çµæœ: å®‰è£openvino-devæ™‚å¤±æ•—
   #+begin_src shell -r -n :results output :exports both
   Collecting openvino==2021.4.0
     Using cached openvino-2021.4.0-3839-cp39-cp39-macosx_10_15_x86_64.whl (25.8 MB)
   ERROR: Cannot install openvino-dev[onnx,tensorflow2]==2021.4.0, openvino-dev[onnx,tensorflow2]==2021.4.1 and openvino-dev[onnx,tensorflow2]==2021.4.2 because these package versions have conflicting dependencies.

   The conflict is caused by:
       openvino-dev[onnx,tensorflow2] 2021.4.2 depends on tensorflow~=2.4.1; extra == "tensorflow2"
       openvino-dev[onnx,tensorflow2] 2021.4.1 depends on tensorflow~=2.4.1; extra == "tensorflow2"
       openvino-dev[onnx,tensorflow2] 2021.4.0 depends on tensorflow~=2.4.1; extra == "tensorflow2"

   To fix this you could try to:
   1. loosen the range of package versions you've specified
   2. remove package versions to allow pip attempt to solve the dependency conflict
   #+end_src
5. ä¿®æ­£åŸæœ¬çš„requirements.txt
   åˆªé™¤ç¬¬ä¸€è¡Œ
6. Install IntelÂ® Distribution of OpenVINOâ„¢ toolkit from Anaconda Cloud
   [[https://docs.openvino.ai/2021.3/openvino_docs_install_guides_installing_openvino_conda.html][https://docs.openvino.ai/2021.3/openvino_docs_install_guides_installing_openvino_conda.html]]
   #+begin_src shell -r -n :results output :exports both
   conda install openvino-ie4py -c intel
   #+end_src
7. Install the virtualenv Kernel in Jupyter
   #+begin_src shell -r -n :results output :exports both
   python -m ipykernel install --user --name openvino_env
   #+end_src
8. Launch the Notebooks!
   To launch a single notebook, like the Monodepth notebook
   #+begin_src shell -r -n :results output :exports both
   jupyter notebook notebooks/201-vision-monodepth/201-vision-monodepth.ipynb
   #+end_src
   To launch all notebooks in Jupyter Lab
   #+begin_src shell -r -n :results output :exports both
   jupyter lab notebooks
   #+end_src
   In Jupyter Lab, select a notebook from the file browser using the left sidebar. Each notebook is located in a subdirectory within the notebooks directory.

** condaåŸºæœ¬èªæ³•
*** æª¢æŸ¥ç›®å‰ç’°å¢ƒ
#+begin_src shell -r -n :results output :exports both
conda env list
#+end_src

#+RESULTS:
: # conda environments:
: #
: base                  *  /Users/letranger/opt/anaconda3
: ai4y                     /Users/letranger/opt/anaconda3/envs/ai4y
: myEnv                    /Users/letranger/opt/anaconda3/envs/myEnv
:
*** å»ºç«‹æ–°ç’°å¢ƒ
#+begin_src shell -r -n :results output :exports both
conda create --name myEnv python=3.7
#+end_src

#+RESULTS:
: WARNING: A conda environment already exists at '/Users/letranger/opt/anaconda3/envs/myEnv'
: Remove existing environment (y/[n])?

*** å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
#+begin_src shell -r -n :results output :exports both
activate myEnv
#+end_src

*** åˆªé™¤è™›æ“¬ç’°å¢ƒ
#+begin_src shell -r -n :results output :exports both
conda remove --name myEnv
#+end_src

#+RESULTS:

* localhost
1. Install cmake
   - æ±è¥¿åœ¨ NAS
2. Add /Applications/CMake.app/Contents/bin to path (for default install)
   edit .bashrc file,åŠ å…¥
   #+begin_src shell -r -n :results output :exports both
   export PATH="/Applications/CMake.app/Contents/bin:$PATH"
   #+end_src
3. Install openvino tool kit
   - NAS
4. vi ~/.bash_profile
   åŠ å…¥
   #+begin_src shell -r -n :results output :exports both
   source /opt/intel/openvino_2021/bin/setupvars.sh
   #+end_src
5. Configure the Model OptimizerÂ¶
   #+begin_src shell -r -n :results output :exports both
   cd /opt/intel/openvino_2021/deployment_tools/model_optimizer/install_prerequisites
   sudo ./install_prerequisites.sh
   #+end_src
6. Upgrade PyYAML
   #+begin_src shell -r -n :results output :exports both
   sudo -H pip3 install --ignore-installed PyYAML
   #+end_src
7. Testing
   #+begin_src shell -r -n :results output :exports both
   cd /opt/intel/openvino_2021/deployment_tools/demo
   sh demo_benchmark_app.sh
   sh demo_security_barrier_camera.sh
   sh demo_squeezenet_download_convert_run.sh
   #+end_src
   8. Install cv2
   #+begin_src shell -r -n :results output :exports both
pip3 install --user opencv-python
   #+end_src

   #+RESULTS:
   : Collecting opencv-python
   :   Using cached https://files.pythonhosted.org/packages/8b/9f/879a48a4d4361d1784728be8543f5c8b2b681db500c9e6854f0654645c3d/opencv_python-4.5.4.58-cp37-cp37m-macosx_10_15_x86_64.whl
   : Collecting numpy>=1.14.5 (from opencv-python)
   :   Using cached https://files.pythonhosted.org/packages/5d/e4/1178a2e82d1c9abd696496d4f0fc2d09e346b43101829e08eb3ee558fd5d/numpy-1.21.4-cp37-cp37m-macosx_10_9_x86_64.whl
   : Installing collected packages: numpy, opencv-python
   : Successfully installed numpy-1.21.4 opencv-python-4.5.4.58

9. copy openvino to site_package
   #+begin_src shell -r -n :results output :exports both
cd /Users/letranger/opt/anaconda3/lib/python3.8/site-packages
cp -r /opt/intel/openvino_2021.4.689/python/python3.8/openvino .
   #+end_src

   #+RESULTS:

* Docker
** Introduction
- ä¸€èˆ¬å¤§å®¶è²·ä¾†çš„é›»è…¦ä¸Šå¤§éƒ¨ä»½éƒ½æ˜¯å®‰è£å¾®è»Ÿçš„Windowsä½œæ¥­ç³»çµ±ï¼Œå¦‚æœé‡åˆ°è¦é–‹ç™¼Liunxç›¸é—œæ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œå¯èƒ½æœ‰äººæœƒé¸æ“‡å®‰è£äºŒå€‹ä½œæ¥­ç³»çµ±ï¼Œåœ¨é‡æ–°é–‹æ©Ÿæ™‚é¸æ“‡è¦åŸ·è¡Œé‚£ä¸€ç¨®ã€‚é›–ç„¶é€™ç¨®æ–¹å¼å¯å®Œå…¨æŒæ§ç¡¬é«”è³‡æºï¼ˆå¦‚CPU, GPU, HDD, RAMï¼‰åŠé–‹ç™¼ç’°å¢ƒï¼ˆç›¸ä¾å¥—ä»¶ã€å‡½å¼åº«ï¼‰ï¼Œä½†æ¯æ¬¡åˆ‡æ›ä½œæ¥­ç³»çµ±éƒ½è¦é‡æ–°é–‹æ©Ÿï¼Œå¯¦åœ¨å¤ªéº»ç…©ã€‚
- ç‚ºè§£æ±ºé€™å€‹å•é¡Œï¼Œæ–¼æ˜¯å°±æœ‰äººæå‡ºåœ¨ä¸»ä½œæ¥­ç³»çµ±(Host OS)ä¸Šå®‰è£ä¸€å€‹è™›æ“¬æ©Ÿ(Virtual Machine, VM)ç›£è¦–å™¨(Hypervisor)ï¼Œå¦‚VMWare, VirtualBoxé€™é¡å·¥å…·ï¼Œæ–¹ä¾¿å®‰è£å…¶å®ƒä½œæ¥­ç³»çµ±æˆ–è€…å¤šç¨®ä¸åŒçš„é–‹ç™¼ç’°å¢ƒï¼Œå¦‚Fig. 1å·¦åœ–æ‰€ç¤ºã€‚é›–ç„¶é€™æ¨£å¾ˆæ–¹ä¾¿åŒæ™‚ä½¿ç”¨å…©ç¨®ä»¥ä¸Šä½œæ¥­ç’°å¢ƒï¼Œä½†ç¡¬é«”è³‡æºè¦å’Œä¸»ç³»çµ±å…±äº«ä¸”é¡å¤–å¤šäº†ä¸€äº›è™›æ“¬åŒ–è½‰æ›å·¥ä½œï¼Œæ‰€ä»¥åŸ·è¡Œæ•ˆèƒ½è¼ƒå·®ï¼Œç”šè‡³æœ‰äº›ç¡¬é«”ï¼ˆå¦‚GPUï¼‰ç„¡æ³•ç›´æ¥ä½¿ç”¨ï¼Œå°è‡´éƒ¨ä»½æ‡‰ç”¨ç¨‹å¼ç„¡æ³•é‹ä½œã€‚
- å¾ˆå¤šåœ¨Linuxç’°å¢ƒä¸‹é–‹ç™¼ç¨‹å¼çš„äººéƒ½çŸ¥é“ï¼Œå®ƒçš„æ‡‰ç”¨ç¨‹å¼æ¯”è¼ƒä¸åƒåœ¨Windowsä¸‹ä¸€å€‹åŸ·è¡Œæª”(.exe)æˆ–æ­é…å¹¾å€‹å‹•æ…‹å‡½å¼åº«(.dll)å°±èƒ½é †åˆ©åŸ·è¡Œï¼Œå„ç¨®é–‹ç™¼å·¥å…·åŠç›¸ä¾å¥—ä»¶åŒ…å¸¸æœƒæœ‰ç‰ˆæœ¬ä¸ç›¸å®¹å•é¡Œã€‚æœ¬ä¾†åœ¨Linuxä¸Šä¹Ÿå¯ä»¥åŸ·è¡Œè™›æ“¬æ©Ÿ(VM)ä¾†å€éš”ä¸åŒé–‹ç™¼ç’°å¢ƒï¼Œä½†æ•ˆèƒ½å¯¦åœ¨å¤ªå·®ï¼Œæ‰€ä»¥ä¾¿æœ‰äººé–‹ç™¼å‡ºä»¥ä¸€ç¨®é¡ä¼¼å¤§èˆ¹è¼‰é€è²¨æ«ƒï¼Œè²¨æ«ƒè£è¼‰å„ç¨®ä¸åŒå¤§å°ã€å½¢ç‹€è²¨ç‰©çš„åŸ·è¡Œç’°å¢ƒï¼Œç¨±ç‚ºDockerã€‚
- å¦‚åœ–[[fig:DockerVM]]æ‰€ç¤ºï¼Œå®¹å™¨(Containers)å°±åƒè²¨æ«ƒæ˜¯ç”¨ä¾†è£è¼‰æ˜ åƒæª”(Images)é€™æ¨£çš„è²¨ç‰©ï¼Œå†ç”±Dockerå¼•æ“ï¼ˆå¤§èˆ¹æ‰¿è¼‰ï¼‰åŸ·è¡Œçš„æ¦‚å¿µã€‚è¡¨é¢ä¸Šçœ‹èµ·ä¾†å’ŒVMæ²’ä»€éº¼ä¸åŒï¼Œä½†æœ€å¤§å·®åˆ¥å°±æ˜¯å®ƒå¾ˆè¼•é‡ï¼Œä¸é€éè™›æ“¬åŒ–ï¼Œç›´æ¥é©…å‹•ç¡¬é«”è³‡æºï¼Œå…±ç”¨ä½œæ¥­ç³»çµ±è³‡æºï¼Œæ‰€ä»¥å•Ÿç”¨ä¸€å€‹å®¹å™¨å’Œæ˜ åƒæª”åƒ…é ˆæ•¸ç§’å’Œè¼‰å…¥ä¸€å€‹VMå®¢ä½œæ¥­ç³»çµ±æ ¸å¿ƒè¦æ•¸åˆ†é˜å·®ç•°é —å¤§ã€‚ä»¥å¾€Dockeråªèƒ½åœ¨Linuxä¸Šé‹ä½œï¼Œè¿‘å¹´ä¾†å·²æœ‰æ”¯æ´WindowåŠMac OSçš„ç‰ˆæœ¬å‡ºç¾äº†ã€‚
- ä¸€èˆ¬Dockerä½¿ç”¨ä¸Šæ¥µç‚ºæ–¹ä¾¿ï¼Œä¾›æ‡‰å•†åƒ…éœ€å°‡æ¬²æä¾›çš„æ˜ åƒæª”(Images)æ¨ä¸Š(Push) å…¬é–‹æ˜ åƒæª”å€‰å„²(Repository / Docker Hub)ï¼Œä½¿ç”¨è€…å†å»æ‹‰ä¸‹(Pull)æƒ³è¦çš„æ˜ åƒæª”å³å¯åŸ·è¡Œï¼Œå¦‚åœ–[[fig:DockerVM]]å³åœ–æ‰€ç¤ºã€‚
#+CAPTION: VMå’ŒDockeræ¶æ§‹å·®ç•°æ¯”è¼ƒåœ–ã€‚(OmniXRI, Jan. 2021æ•´ç†è£½ä½œ)
#+LABEL:fig:DockerVM
#+name: fig:DockerVM
#+ATTR_LATEX: :width 400
#+ATTR_ORG: :width 400
#+ATTR_HTML: :width 500
[[file:images/OpenVINO_Docker_1.jpg]]
** Install Docker
1. Install Docker on Mac
   #+begin_src shell -r -n :results output :exports both
   brew install --cask  --appdir=/Applications docker
   #+end_src

   #+RESULTS:
   #+begin_example
   ==> Downloading https://desktop.docker.com/mac/main/amd64/70708/Docker.dmg
   ==> Installing Cask docker
   ==> Moving App 'Docker.app' to '/Applications/Docker.app'
   ==> Linking Binary 'docker-compose.bash-completion' to '/usr/local/etc/bash_completion.d/docker-compose'
   ==> Linking Binary 'docker.zsh-completion' to '/usr/local/share/zsh/site-functions/_docker'
   ==> Linking Binary 'docker.fish-completion' to '/usr/local/share/fish/vendor_completions.d/docker.fish'
   ==> Linking Binary 'docker-compose.fish-completion' to '/usr/local/share/fish/vendor_completions.d/docker-compose.fish'
   ==> Linking Binary 'docker-compose.zsh-completion' to '/usr/local/share/zsh/site-functions/_docker_compose'
   ==> Linking Binary 'docker.bash-completion' to '/usr/local/etc/bash_completion.d/docker'
   ğŸº  docker was successfully installed!
   #+end_example

2. Pull from Github
** Testing Docker
#+begin_src shell -r -n :results output :exports both
docker run hello-world
#+end_src
ç”±æ–¼ç¬¬ä¸€æ¬¡åŸ·è¡Œï¼Œæœ¬æ©Ÿç«¯ä¸¦æ²’hello-worldé€™å€‹æ˜ åƒæª”ï¼Œæ‰€ä»¥æœƒè‡ªå‹•åˆ°Docker Hubå»æ‰¾ï¼Œä¸¦ä¸‹è¼‰å›ä¾†ã€‚å¦‚æœæˆåŠŸæœƒçœ‹åˆ°ä¸‹é¢ç•«é¢ã€‚
** ä½¿ç”¨ Docker å®‰è£ OpenVINO
- Intel OpenVINO å°æ‡‰ä¸åŒæ“ä½œç³»çµ±(Windows, Linux, macOS, RaspbianOS)æä¾›å¾ˆå¤šç¨®å®‰è£æ–¹å¼ã€‚è¿‘å¹´ä¾†éš¨è‘—å„ç¨®å®¹å™¨æŠ€è¡“èˆˆèµ·ï¼Œä¹Ÿé–‹å§‹æ”¯æŒåƒ Docker é€™é¡ç›´æ¥å®‰è£æ˜ åƒæ–¹å¼ï¼Œå……ä»½è§£æ±ºç”¨æˆ¶ä¸ç†Ÿæ‚‰å®‰è£æ­¥é©ŸåŠæ»¿è¶³é–‹ç™¼è€…éœ€è¦ä¸åŒç‰ˆæœ¬æˆ–é–‹ç™¼ç’°å¢ƒéš”é›¢éœ€æ±‚ã€‚
- Intel OpenVINO ç›®å‰åœ¨ Docker Hub ä¸Šæä¾›äº†å¤šå€‹æ˜ åƒè®“ä½¿ç”¨è€…ä¸‹è¼‰(pull)ï¼Œå…¶ä¸­æœ‰å…©çµ„ä½¿ç”¨ç‡è¼ƒé«˜ï¼Œopenvino/workbench ç”¨æˆ¶ä¸éœ€ç·¨ç¨‹ï¼Œç›´æ¥æ“ä½œåœ–å‹åŒ–æ¥å£å°±å¯æ¸¬è©¦å„ç¨®æ¨¡å‹çš„æ•ˆç‡ï¼Œopenvino/ubuntu18_dev å‰‡æä¾›ä¸€èˆ¬ Ubuntu 18.04 (Linux) é–‹ç™¼ç’°å¢ƒã€‚
- é¦–å…ˆåŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤å°‡æ˜ åƒæ–‡ä»¶ openvino/ubuntu18_dev å¾ Docker Hub æ‹‰ä¸‹ï¼ˆä¸‹è¼‰ï¼‰è‡³æœ¬æ©Ÿç«¯ã€‚ç”±æ–¼æ–‡ä»¶æ•¸é‡è¼ƒå¤šä¸”è¼ƒå¤§ï¼ˆè§£å£“ç¸®å¾Œç´„ 7.22GByteï¼‰ï¼Œæ‰€ä»¥æ ¹æ“šç¶²çµ¡é€Ÿåº¦å¯èƒ½éœ€è¦ç­‰å¾…æ•¸åˆ†é˜åˆ°æ•¸ååˆ†é¾ä¸ç­‰ã€‚
*** ä¸‹è¼‰ã€åŸ·è¡Œimage
#+begin_src shell -r -n :results output :exports both
docker pull openvino/ubuntu18_dev
#+end_src
è‹¥æƒ³å•Ÿå‹•æ˜ åƒæ–‡ä»¶ï¼Œæ ¹æ“šä¸åŒç¡¬ä»¶åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ã€‚
- Intel CPU
#+begin_src shell -r -n :results output :exports both
docker run -it --rm openvino/ubuntu18_dev
#+end_src
- Intel GPU
#+begin_src shell -r -n :results output :exports both
docker run -it --rm --device /dev/dri openvino/ubuntu18_dev
#+end_src
- NCS2ï¼ˆå–®å€‹ VPUï¼‰
#+begin_src shell -r -n :results output :exports both
docker run -it --rm --device-cgroup-rule='c 189:* rmw' -v /dev/bus/usb:/dev/bus/usb openvino/ubuntu18_dev
#+end_src
- HDDLï¼ˆå¤šå€‹ VPUï¼‰
#+begin_src shell -r -n :results output :exports both
docker run -it --rm --device=/dev/ion:/dev/ion -v /var/tmp:/var/tmp openvino/ubuntu18_dev
#+end_src
** Dockerå¸¸ç”¨æŒ‡ä»¤
- docker info
  #+begin_src shell -r -n :results output :exports both
  docker info
  #+end_src

  #+RESULTS:
  #+begin_example
  Client:
   Context:    default
   Debug Mode: false
   Plugins:
    buildx: Build with BuildKit (Docker Inc., v0.6.3)
    compose: Docker Compose (Docker Inc., v2.1.1)
    scan: Docker Scan (Docker Inc., 0.9.0)

  Server:
   Containers: 4
    Running: 1
    Paused: 0
    Stopped: 3
   Images: 3
   Server Version: 20.10.10
   Storage Driver: overlay2
    Backing Filesystem: extfs
    Supports d_type: true
    Native Overlay Diff: true
    userxattr: false
   Logging Driver: json-file
   Cgroup Driver: cgroupfs
   Cgroup Version: 1
   Plugins:
    Volume: local
    Network: bridge host ipvlan macvlan null overlay
    Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
   Swarm: inactive
   Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc
   Default Runtime: runc
   Init Binary: docker-init
   containerd version: 5b46e404f6b9f661a205e28d59c982d3634148f8
   runc version: v1.0.2-0-g52b36a2
   init version: de40ad0
   Security Options:
    seccomp
     Profile: default
   Kernel Version: 5.10.47-linuxkit
   Operating System: Docker Desktop
   OSType: linux
   Architecture: x86_64
   CPUs: 6
   Total Memory: 1.939GiB
   Name: docker-desktop
   ID: L33G:3G5F:HIHY:FWNH:25ZM:DU35:IH2S:K4AD:6VKJ:UL3Z:IBW4:ZZY7
   Docker Root Dir: /var/lib/docker
   Debug Mode: false
   HTTP Proxy: http.docker.internal:3128
   HTTPS Proxy: http.docker.internal:3128
   Registry: https://index.docker.io/v1/
   Labels:
   Experimental: false
   Insecure Registries:
    127.0.0.0/8
   Live Restore Enabled: false

  #+end_example
- docker pull xxxxx
  å¾Docker Hubæ‹‰ä¸‹ï¼ˆä¸‹è¼‰ï¼‰æ˜ åƒæª” [æ˜ åƒæª”åç¨±xxxxx]
- docker images
  æª¢æŸ¥ç›®å‰å·²ä¸‹è¼‰ä¹‹æ˜ åƒæª”
  #+begin_src shell -r -n :results output :exports both
  docker images
  #+end_src

  #+RESULTS:
  : REPOSITORY               TAG       IMAGE ID       CREATED       SIZE
  : openvino/ubuntu18_dev    latest    5909980b90ae   8 days ago    5.63GB
  : docker/getting-started   latest    eb9194091564   9 days ago    28.5MB
  : hello-world              latest    feb5d9fea6a5   8 weeks ago   13.3kB
- docker ps
  æª¢æŸ¥ç›®å‰æ­£åœ¨åŸ·è¡Œçš„container
  #+begin_src shell -r -n :results output :exports both
  docker ps
  #+end_src

  #+RESULTS:
  : CONTAINER ID   IMAGE                   COMMAND       CREATED       STATUS       PORTS     NAMES
  : 29c22b186088   openvino/ubuntu18_dev   "/bin/bash"   9 hours ago   Up 9 hours             compassionate_heyrovsky
- docker ps -a
  æŸ¥çœ‹æ‰€æœ‰çš„container
  #+begin_src shell -r -n :results output :exports both
  docker ps -a
  #+end_src

  #+RESULTS:
  : CONTAINER ID   IMAGE                    COMMAND                  CREATED          STATUS                      PORTS     NAMES
  : 7ce134ba2f64   hello-world              "/hello"                 16 minutes ago   Exited (0) 16 minutes ago             lucid_sinoussi
  : 29c22b186088   openvino/ubuntu18_dev    "/bin/bash"              9 hours ago      Up 9 hours                            compassionate_heyrovsky
  : 43ae292225cb   docker/getting-started   "/docker-entrypoint.â€¦"   24 hours ago     Created                               charming_hofstadter
  : 07b136cc7716   docker/getting-started   "/docker-entrypoint.â€¦"   24 hours ago     Exited (0) 14 minutes ago             goofy_goldwasser
- docker start [Container ID]
  å•Ÿå‹•docker container
  #+begin_src shell -r -n :results output :exports both
  docker start 07b136cc7716
  docker ps
  #+end_src

  #+RESULTS:
  : 07b136cc7716
  : CONTAINER ID   IMAGE                    COMMAND                  CREATED        STATUS          PORTS                NAMES
  : 29c22b186088   openvino/ubuntu18_dev    "/bin/bash"              9 hours ago    Up 9 hours                           compassionate_heyrovsky
  : 07b136cc7716   docker/getting-started   "/docker-entrypoint.â€¦"   24 hours ago   Up 13 seconds   0.0.0.0:80->80/tcp   goofy_goldwasser
- docker stop [Container ID]
  åœæ­¢åŸ·è¡ŒContainer
  #+begin_src shell -r -n :results output :exports both
  docker stop 07b136cc7716
  #+end_src

  #+RESULTS:
  : 07b136cc7716
- docker rm [Container DI]
  åˆªé™¤Container
  #+begin_src shell -r -n :results output :exports both
  docker rm 7ce134ba2f64
  docker ps -a
  #+end_src

  #+RESULTS:
  : 7ce134ba2f64
  : CONTAINER ID   IMAGE                    COMMAND                  CREATED        STATUS        PORTS     NAMES
  : 29c22b186088   openvino/ubuntu18_dev    "/bin/bash"              11 hours ago   Up 11 hours             compassionate_heyrovsky
  : 43ae292225cb   docker/getting-started   "/docker-entrypoint.â€¦"   26 hours ago   Created                 charming_hofstadter
- docker rmi [Image ID]
  åˆªé™¤ image, åˆªé™¤ image å‰å¿…éœ€å°‡é€éè©² image æ‰€ç”¢ç”Ÿçš„ container ç§»é™¤
  
- docker container ls
  List containers
  #+begin_src shell -r -n :results output :exports both
  docker container ls
    #+end_src

  #+RESULTS:
  : CONTAINER ID   IMAGE                   COMMAND       CREATED       STATUS       PORTS     NAMES
  : 29c22b186088   openvino/ubuntu18_dev   "/bin/bash"   9 hours ago   Up 9 hours             compassionate_heyrovsky

-
** åˆ©ç”¨å…¬é–‹æ¨¡å‹ MobileNet åŸ·è¡Œåœ–åƒåˆ†é¡
åˆ©ç”¨ Docker å®‰è£å¥½OpenVINO å·¥ä½œç’°å¢ƒå¾Œå°±å¯ä»¥é–‹å§‹é€²è¡Œæ¨ç†(Inference)å·¥ä½œäº†ã€‚OpenVINO é™¤äº†æä¾›å¤šç¨®é è¨“ç·´å¥½çš„æ¨¡å‹å¤–[11]ï¼Œå¦å¤–ä¹Ÿæ”¯æŒå¾ˆå¤šä¸åŒæ¡†æ¶ (Caffe/Caffe2, PyTorch, TensorFlow, MXNet, ONNX ç­‰)ç”¢ç”Ÿçš„å…¬é–‹æ¨¡å‹[12]ï¼Œä¹Ÿç¨±ç‚ºã€ŒOpen Model Zooã€ï¼Œå…¶ä¸­åŒ…å«åœ–åƒåˆ†é¡ã€å°è±¡åµæ¸¬ã€åœ–åƒåˆ†å‰²ã€äººè‡‰è­˜åˆ¥ã€äººé«” å§¿æ…‹ã€æ·±åº¦ä¼°æ¸¬ã€åœ–åƒå¡«è£œã€é¢¨æ ¼è½‰ç§»ã€å‹•ä½œè­˜åˆ¥ã€åœ–åƒè‘—è‰²ã€è²éŸ³åˆ†é¡ã€èªéŸ³ è­˜åˆ¥ã€åœ–åƒç¿»è­¯ç­‰å…¬é–‹æ¨¡å‹ã€‚

ä½¿ç”¨é€™äº›æ¨¡å‹å‰é ˆå…ˆä¸‹è¼‰ä¸¦åŸ·è¡Œå„ªåŒ–ï¼Œæœ€å¾Œç”¢ç”Ÿ OpenVINO æ¨ç†æ™‚æ‰€éœ€çš„ä¸­é–“è¡¨ç¤ºæ–‡ä»¶(Intermediate Representation, IR)ï¼Œå³æ¨¡å‹æè¿°æ–‡ä»¶(*.xml)åŠåƒæ•¸æ¬Šé‡æ–‡ä»¶(*.bin)ï¼Œå­˜æ”¾åœ¨/opt/intel/openvino/public/æ¨¡å‹åç¨±/FP16(æˆ– FP32, INT8)è·¯å¾‘ä¸‹ã€‚
** mobilenet åœ–åƒåˆ†é¡
*** ä¸‹è¼‰openvion docker image
å•Ÿå‹• Docker ä¸¦æŒ‡å®šæ˜ åƒåœ¨ Intel CPU ä¸ŠåŸ·è¡Œï¼Œä»¥ root èº«ä»½åŸ·è¡Œï¼ŒåŒæ™‚æŒ‡ä»¤é¡¯ç¤ºå™¨å’Œç³»çµ±å…±äº«ï¼Œæ–¹ä¾¿ OpenCV åŸ·è¡Œimshow()èƒ½æ­£å¸¸å·¥ä½œ
#+begin_src shell -r -n :results output :exports both
docker run -itu root:root --rm -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=$DISPLAY openvino/ubuntu18_dev
#+end_src
*** ä¸‹è¼‰æ¨¡å‹
#+begin_src shell -r -n :results output :exports both
python3 /opt/intel/openvino/deployment_tools/tools/model_downloader/downloader.py --name mobilenet-v1-1.0-224
#+end_src
*** å„ªåŒ–æ¨¡å‹
å„ªåŒ–mobilenet-v1-1.0-224 ä¸¦ç”¢å‡ºä¸­é–“è¡¨ç¤º(*.xml, *.bin)æ–‡ä»¶ï¼ŒFP16/FP32 æ ¼å¼æ–¼ /opt/intel/openvino/deployment_tools/public/æ¨¡å‹åç¨±è·¯å¾‘ä¸‹
#+begin_src shell -r -n :results output :exports both
python3 /opt/intel/openvino/deployment_tools/tools/model_downloader/converter.py --name mobilenet-v1-1.0-224
#+end_src
*** è¼¸å…¥åœ–ç‰‡ï¼Œæ¸¬è©¦æ¨ç†
#+begin_src shell -r -n :results output :exports both
python3 /opt/intel/openvino/inference_engine/samples/python/classification_sample_async/classification_sample_async.py -m /opt/intel/openvino/public/mobilenet-v1-1.0-224/FP16/mobilenet-v1-1.0-224.xml -i /opt/intel/openvino/deployment_tools/demo/car.png --labels /opt/intel/openvino/deployment_tools/demo/squeezenet1.1.labels
#+end_src
*** æ›æˆå…¶ä»–æ±½è»Šåœ–ç‰‡
1. åˆ‡æ›åˆ°hostä¸‹è¼‰åœ–ç‰‡, ~/Downloads/pickup.jpg
2. æŸ¥è©¢container ID
   #+begin_src shell -r -n :results output :exports both
   docker ps
   #+end_src
   #+RESULTS:
   : CONTAINER ID   IMAGE                    COMMAND                  CREATED        STATUS        PORTS                NAMES
   : 29c22b186088   openvino/ubuntu18_dev    "/bin/bash"              9 hours ago    Up 9 hours                         compassionate_heyrovsky
   : 07b136cc7716   docker/getting-started   "/docker-entrypoint.â€¦"   23 hours ago   Up 23 hours   0.0.0.0:80->80/tcp   goofy_goldwasser
3. å°‡ä¸‹è¼‰çš„åœ–ç‰‡è¤‡è£½åˆ°containerä¸­
   #+begin_src shell -r -n :results output :exports both
   docker cp ~/Downloads/pickup.jpg 29c22b186088:/opt/intel/openvino/deployment_tools/demo
   #+end_src
4. é‡æ–°æ¸¬è©¦æ¨ç†
** Docker References
[[https://makerpro.cc/2021/01/use-docker-to-develop-the-environment-of-openvino/][- å¦‚ä½•åˆ©ç”¨Dockerå¿«é€Ÿå»ºç½®OpenVINOâ„¢ Toolkité–‹ç™¼ç’°å¢ƒ]]
- [[https://philipzheng.gitbook.io/docker_practice/introduction/what][ä»€éº¼æ˜¯ Docker]]

* Uninstallation OpenVino on Mac
- åŸ·è¡Œopenvino_toolkit_uninstaller.app:
  #+begin_src shell -r -n :results output :exports both
  /opt/intel/openvino_2021
  #+end_src

* Footnotes

[fn:4][[https://zh.wikipedia.org/wiki/%E4%B8%AD%E9%96%93%E8%AA%9E%E8%A8%80][ä¸­é–“èªè¨€]]

[fn:3][[https://vocus.cc/article/5b83fadffd89780001393246][[æ¢ç´¢] ç¾è¡Œæ·±åº¦å­¸ç¿’æ¶æ§‹æ¦‚æ³ ]]

[fn:2][[https://ithelp.ithome.com.tw/articles/10209319][27. å·¥æ¬²åˆ©å…¶å™¨ï¼šçªç ´æ·±åº¦å­¸ç¿’çš„å·´åˆ¥å¡”éšœç¤™]]

[fn:1][[https://blog.tibame.com/?p=19049][AI60å•ã€‘Q40AIæ·±åº¦å­¸ç¿’é–‹ç™¼å·¥å…·æœ‰å“ªäº›ï¼Ÿ]]
